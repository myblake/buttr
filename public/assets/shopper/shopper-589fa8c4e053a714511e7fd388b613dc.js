function startWaiting(a){var t=a.find("select.availability"),e=(a.find("option").val(),a.attr("class"));a.removeClass(e),a.data("last-class",e),a.find("select").hide(),$("#loader").clone().attr("id","link-clone"+t.data("day")+t.data("time")).addClass("link-clone").removeClass("hidden").insertBefore(t)}function stopWaiting(a,t,e){var i=a.find("select.availability");t?a.addClass("calendar-"+e):a.addClass(a.data("last-class")),a.data("last-class",""),$("#link-clone"+i.data("day")+i.data("time")).remove(),a.find("select").show()}$(".js-toggle-available.availability").change(function(){var a=$(this),t=a.data("url"),e=a.val(),i=a.parent();return startWaiting(i),$.ajax(t,{type:"put",data:{day:a.data("day"),time:a.data("time"),zone:a.parent().find("select.zone").val(),level:e},success:function(a){stopWaiting(i,!0,a.object.level)},error:function(){stopWaiting(i,!1,"")}}),!1}),$(".js-toggle-available.zone").change(function(){$(this).parent().find("select.availability").change()});