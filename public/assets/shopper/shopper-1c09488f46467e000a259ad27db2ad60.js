function startWaiting(a){var l=a.find("a");a.hasClass("calendar-unavailable")?(a.removeClass("calendar-unavailable"),a.data("last-class","calendar-unavailable")):(a.removeClass("calendar-available"),a.data("last-class","calendar-available")),l.hide(),$("#loader").clone().attr("id","link-clone"+l.data("day")+l.data("time")).addClass("link-clone").removeClass("hidden").insertBefore(l)}function stopWaiting(a,l){var e=a.find("a");l?toggleAvailability(a):a.addClass(a.data("last-class")),a.data("last-class",""),$("#link-clone"+e.data("day")+e.data("time")).remove(),e.show()}function toggleAvailability(a){"calendar-unavailable"==a.data("last-class")?(a.addClass("calendar-available"),a.find("a").text("Mark Unavailable")):(a.addClass("calendar-unavailable"),a.find("a").text("Mark Available"))}$(".js-toggle-available").click(function(){var a=$(this),l=a.attr("href");return $element=a.parent(),startWaiting($element),$.ajax(l,{type:"put",success:function(){stopWaiting($element,!0)},error:function(){stopWaiting($element,!1)}}),!1});